<!doctype html>
<!--
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
<head>
  <meta charset="utf-8">
  <script src="../../../webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../../web-component-tester/browser.js"></script>
  <link rel="import" href="../../polymer-element.html">
  <link rel="import" href="../../lib/mixins/dom-switch.html">
  <link rel="import" href="../../lib/elements/dom-switch.html">
  <link rel="import" href="dom-switch-elements1.html">
</head>
<body>
  <x-no-templates id="noTemplates" type="test1"></x-no-templates>

  <x-one-of-each id="one1" type="test1" args="arg1"></x-one-of-each>
  <x-one-of-each id="one2" type="test2" args="arg2"></x-one-of-each>
  <x-one-of-each id="one3" type="test3" args="arg3"></x-one-of-each>

  <dom-switch id="adhoc" type="test1">
    <template type="test1"><span id="test1">arg</span></template>
    <template type="test2"><span id="test2">arg</span></template>
    <template default>
      <span id="default_type">test3</span>:
      <span id="default_args">arg</span>
    </template>
  </dom-switch>

  <x-two-of-each id="two1" type="test1" args="arg1"></x-two-of-each>
  <x-two-of-each id="two2" type="test2" args="arg2"></x-two-of-each>
  <x-two-of-each id="two3" type="test3" args="arg3"></x-two-of-each>

  <script>
    /* global noTemplates one1 one2 one3 adhoc two1 two2 two3*/
    suite('dom-switch', function() {
      test('blank content', function() {
        assert.equal(noTemplates.textContent, '');
        assert.isUndefined(noTemplates.$);
      });

      function checkdefined(isdefined, tocheck, value, text) {
        if (isdefined) {
          assert.isUndefined(tocheck, text);
        } else {
          assert.isDefined(tocheck, text);
          assert.equal(tocheck.textContent, value);
        }
      }

      function trytype(ele, type, args, samecheck, skipinit) {
        if (!skipinit) {
          ele.type = type;
          ele.render();
        }
        checkdefined(type !== 'test1', ele.$.test1, args);
        checkdefined(type !== 'test2', ele.$.test2, args);
        checkdefined(type !== 'test3', ele.$.default_type, type, 'default_type');
        checkdefined(type !== 'test3', ele.$.default_args, args, 'default_args');
        if (samecheck) {
          assert.equal(ele.$.same.textContent, 'first');
        }
      }

      function runtest(ele, initval, args, samecheck) {
        trytype(ele, initval, args, samecheck, true);
        trytype(ele, 'test1', args, samecheck);
        trytype(ele, 'test2', args, samecheck);
        trytype(ele, 'test3', args, samecheck);
      }

      test('test one1', function() { runtest(one1, 'test1', 'arg1'); });
      test('test one2', function() { runtest(one2, 'test2', 'arg2'); });
      test('test one3', function() { runtest(one3, 'test3', 'arg3'); });

      test('test adhoc', function() { runtest(adhoc, 'test1', 'arg'); });

      test('test two1', function() { runtest(two1, 'test1', 'arg1', true); });
      test('test two2', function() { runtest(two2, 'test2', 'arg2', true); });
      test('test two3', function() { runtest(two3, 'test3', 'arg3', true); });
    });
  </script>
</body>
</html>

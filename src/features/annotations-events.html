<!--
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../base.html">
<link rel="import" href="annotations.html">

<script>

  /*
   * Parses the annotations map created by `annotations` features to support
   * declarative events.
   *
   * Depends on `annotations` and `events` features.
   *
   */
  Base.addFeature({

    // instance-time

    _setupAnnotatedListeners: function() {
      var map = this._template.map;
      if (map) {
        map.forEach(function(annotation) {
          var events = annotation.events;
          if (events && events.length) {
            var node = this.findAnnotatedNode(this.root, annotation);
            events.forEach(function(e) {
              //console.log('[%s] listening for [%s] on [%s]', e.value, e.name, node.localName);
              this.listen(node, e.name, e.value);
            }, this)
          }
        }, this);
      }
    }

  });

</script>

<!--
/*
 * Copyright 2012 The Toolkitchen Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<element name="g-ratings"  attributes="value" handlers="click: clickHandler">
  <link rel="components" href="g-component.html">
  <link rel="stylesheet" href="css/g-ratings.css" />
  <template>
    <span class="star"></span>
    <span class="star"></span>
    <span class="star"></span>
    <span class="star"></span>
    <span class="star"></span>
  </template>
  <script>
    this.component({
      shadowRootCreated: function(inRoot) {
        this.stars = ShadowDOM.localQueryAll(inRoot, ".star");
      },
      created: function() {
        this.valueAttributeChanged();
      },
      prototype: {
        valueAttributeChanged: function() {
          for (var i=0, s; s=this.stars[i]; i++) {
            s.classList.toggle('full', i < Number(this.value));
          }
        },
        clickHandler: function(e) {
          var s = e.target;
          var i = this.stars.indexOf(s);
          this.value = i + (s.classList.contains('full') ? 0 : 1);
        }
      }
    });
  </script>
</element>
